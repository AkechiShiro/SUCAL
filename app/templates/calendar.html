
{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <title>{% block title %} Calendar {% endblock %}</title>
    <link rel="stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/calendar.css') }}"/>
{% endblock %}

{% block content %}
<div id="statusbar" class="">Processing...</div>

    <div class="header">
        <input type="button" class="header-button" value="&lt;" onclick="window.location='{{ previous_month_link }}'"
            title="Previous month" />
        <input type="button" class="header-button" value="&gt;" onclick="window.location='{{ next_month_link }}'"
            title="Next month" />
        <div class="current-date">
            {{ month_name }} {{ year }}
        </div>
        {% if month != current_month or year != current_year %}
            <div class="back-to-current">
                <a href="/{{ calendar_id }}/">back to current</a>
            </div>
        {% endif %}
        {% if display_view_past_button %}
            <input id="toggle-past-events" class="toggle-past-events" type="button" value="View Past" onclick="ToggleViewPastTasks();" />
        {% endif %}
    </div>

    <ul class="calendar-header">
        {% for weekday_header in weekdays_headers %}
            <li class="weekday-header">{{ weekday_header }}</li>
        {% endfor %}
    </ul>

    <ul class="calendar" id="calendar">
        {% for day in month_days %}
            <li
                {% if day.month != month %}
                    class="day othermonth"
                {% else %}
                    class="day"
                {% endif %}
                data-year="{{ day.year }}"
                data-month="{{ day.month }}"
                data-day="{{ day.day }}">

                {% if day.day == current_day and day.month == current_month and day.year == current_year %}
                        <span class="daynumber-current">
                {% else %}
                        <span class="daynumber">
                {% endif %}
                {{ day.day }}</span>
                <ul class="tasks">
                    {% if day.month|string in tasks and day.day|string in tasks[day.month|string] %}
                        {% for task in tasks[day.month|string][day.day|string]%}
                            <li
                                {% if day.month != month %}
                                    class="task greyed"
                                {% else %}
                                    class="task"
                                    style="background-color:{{ task["color"] }}"
                                {% endif %}
                                data-year="{{ day.year }}"
                                data-month="{{ day.month }}"
                                data-day="{{ day.day }}"
                                data-id="{{ task["id"] }}"
                                {% if "repetition_type" in task %}data-recurrent="1"{% endif %}>
                                {{task['summary']}}
                                <p style="background-color: aliceblue; color: black;">{{task['dtstart'].hour}}h
                                    {% if task['dtstart'].minute!=0%}
                                    :{{task['dtstart'].minute}}
                                    {% endif %}
                                </p>

                            </li>
                        {% endfor %}
                    {% endif %}
                </ul>
            </li>
        {% endfor %}
    </ul>

<script type="text/javascript">

</script>


{% endblock %}

